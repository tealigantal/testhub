<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Scientific Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f4; }
        #calculator { width: 320px; margin: 40px auto; padding: 15px; background: #333; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        #screen input { width: 100%; box-sizing: border-box; border: none; text-align: right; padding: 5px; }
        #expression { height: 30px; background: #eaeaea; font-size: 18px; }
        #result { height: 40px; background: #fff; font-size: 24px; margin-top: 5px; }
        .buttons { display: grid; grid-template-columns: repeat(4, 1fr); grid-gap: 5px; margin-top: 10px; }
        .btn { height: 40px; font-size: 18px; border: none; border-radius: 4px; }
        .btn:hover { opacity: 0.8; }
        #equals { background: #2196f3; color: #fff; }
        #clear { background: #f44336; color: #fff; }
    </style>
</head>
<body>
    <div id="calculator">
        <div id="screen">
            <input id="expression" type="text" readonly />
            <input id="result" type="text" readonly />
        </div>
        <div class="buttons">
            <button class="btn" data-value="7">7</button>
            <button class="btn" data-value="8">8</button>
            <button class="btn" data-value="9">9</button>
            <button class="btn" data-value="/">÷</button>

            <button class="btn" data-value="4">4</button>
            <button class="btn" data-value="5">5</button>
            <button class="btn" data-value="6">6</button>
            <button class="btn" data-value="*">×</button>

            <button class="btn" data-value="1">1</button>
            <button class="btn" data-value="2">2</button>
            <button class="btn" data-value="3">3</button>
            <button class="btn" data-value="-">−</button>

            <button class="btn" data-value="0">0</button>
            <button class="btn" data-value=".">.</button>
            <button class="btn" id="clear">C</button>
            <button class="btn" data-value="+">+</button>

            <button class="btn" data-value="(">(</button>
            <button class="btn" data-value=")">)</button>
            <button class="btn" data-value="pi">π</button>
            <button class="btn" data-value="e">e</button>

            <button class="btn" data-value="sin(">sin</button>
            <button class="btn" data-value="cos(">cos</button>
            <button class="btn" data-value="tan(">tan</button>
            <button class="btn" data-value="sqrt(">√</button>

            <button class="btn" data-value="log10(">log</button>
            <button class="btn" data-value="log(">ln</button>
            <button class="btn" data-value="^">^</button>
            <button class="btn" id="equals">=</button>
        </div>
    </div>
    <script>
        const expr = document.getElementById('expression');
        const result = document.getElementById('result');
        document.querySelectorAll('.btn[data-value]').forEach(btn => {
            btn.addEventListener('click', () => {
                expr.value += btn.dataset.value;
            });
        });
        document.getElementById('clear').addEventListener('click', () => {
            expr.value = '';
            result.value = '';
        });
        document.getElementById('equals').addEventListener('click', async () => {
            try {
                const resp = await fetch('/api/evaluate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ expression: expr.value })
                });
                const data = await resp.json();
                result.value = data.result !== undefined ? data.result : data.error || 'Error';
            } catch {
                result.value = 'Error';
            }
        });
    </script>
</body>
</html>
