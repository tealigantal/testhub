<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Scientific Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #calculator { width: 260px; margin: 20px auto; }
        #display { width: 100%; height: 40px; text-align: right; font-size: 24px; margin-bottom: 5px; }
        .row { display: flex; }
        .btn { flex: 1; height: 40px; margin: 2px; font-size: 18px; }
    </style>
</head>
<body>
    <div id="calculator">
        <input id="display" type="text" readonly />
        <div class="row">
            <button class="btn" data-value="7">7</button>
            <button class="btn" data-value="8">8</button>
            <button class="btn" data-value="9">9</button>
            <button class="btn" data-value="/">/</button>
        </div>
        <div class="row">
            <button class="btn" data-value="4">4</button>
            <button class="btn" data-value="5">5</button>
            <button class="btn" data-value="6">6</button>
            <button class="btn" data-value="*">*</button>
        </div>
        <div class="row">
            <button class="btn" data-value="1">1</button>
            <button class="btn" data-value="2">2</button>
            <button class="btn" data-value="3">3</button>
            <button class="btn" data-value="-">-</button>
        </div>
        <div class="row">
            <button class="btn" data-value="0">0</button>
            <button class="btn" data-value=".">.</button>
            <button class="btn" id="clear">C</button>
            <button class="btn" data-value="+">+</button>
        </div>
        <div class="row">
            <button class="btn" data-value="(">(</button>
            <button class="btn" data-value=")">)</button>
            <button class="btn" data-value="sin(">sin</button>
            <button class="btn" data-value="cos(">cos</button>
        </div>
        <div class="row">
            <button class="btn" data-value="tan(">tan</button>
            <button class="btn" data-value="pi">Ï€</button>
            <button class="btn" data-value="^">^</button>
            <button class="btn" id="equals">=</button>
        </div>
    </div>
    <script>
        const display = document.getElementById('display');
        document.querySelectorAll('.btn[data-value]').forEach(btn => {
            btn.addEventListener('click', () => {
                display.value += btn.dataset.value;
            });
        });
        document.getElementById('clear').addEventListener('click', () => {
            display.value = '';
        });
        document.getElementById('equals').addEventListener('click', async () => {
            const expr = display.value;
            const resp = await fetch('/api/evaluate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ expression: expr })
            });
            const data = await resp.json();
            display.value = data.result !== undefined ? data.result : 'Error';
        });
    </script>
</body>
</html>
